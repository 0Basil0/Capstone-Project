{% extends 'base.html' %}
{% load i18n %}

{% block content %}
<div class="login-viewport">
    <div class="login-card fade-in-up card">
        <div class="card-body">
            <h2 class="mb-3 text-center">{% trans "Welcome back" %}</h2>
            <p class="text-muted text-center small">{% trans "Sign in to continue to NutriGuard" %}</p>
            <form method="post" class="mt-3">
                {% csrf_token %}
                <div class="form-row">
                    {{ form.username.label_tag }}
                    {{ form.username }}
                </div>
                <div class="form-row mt-2">
                    {{ form.password.label_tag }}
                    {{ form.password }}
                </div>

                <div class="d-flex gap-2 mt-3 justify-content-center">
                    <button type="submit" class="btn btn-success btn-lg">{% trans "Sign In" %}</button>
                    <a href="{% url 'signup' %}" class="btn btn-outline-success btn-lg">{% trans "Create Account" %}</a>
                </div>

                <div class="text-center mt-3">
                    <a href="{% url 'password_reset' %}" class="small text-muted">{% trans "Forgot password?" %}</a>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_scripts %}
<script>
    // Force the background video to use the login video while on the login page.
    // The base template script will check window.FORCE_BG and use this URL.
    // Use a direct static path to avoid ManifestStaticFilesStorage lookup errors
    window.FORCE_BG = '/static/videos/login.mp4';

    // Optional: ensure the video is visible behind the login viewport by
    // tweaking CSS classes. We rely on existing styles in css/style.css.
    (function(){
        var root = document.documentElement;
        root.classList.add('has-login-bg');
    })();
</script>
{% endblock %}
